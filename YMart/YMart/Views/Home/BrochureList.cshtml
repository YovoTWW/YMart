@using YMart.ViewModels.Brochure;
@model IEnumerable<BasicBrochureViewModel>

@{
    ViewData["Title"] = "Brochures";
}
<div class="d-flex justify-content-between align-items-center mb-3" style="margin-top: 20px;">
    @if (User.IsInRole("Administrator"))
    {
        <h2>@ViewData["Title"]</h2>
    }
    @if (!User.IsInRole("Administrator"))
    {
        <h2>Can only be viewed by Administrators</h2>
    }
</div>
<hr />

 @if (User.IsInRole("Administrator"))
{
    <div class="d-flex justify-content-between align-items-center mb-3" style="margin-top: 20px;">      
            <a asp-controller="Home" asp-action="AddBrochure" class="btn btn-primary"><i class="bi bi-plus-circle"></i>Add Brochure</a>
    </div>
    <hr />

    <div style="display: flex; flex-direction: column; gap: 20px; margin-top: 20px;">
        @foreach (var brochure in Model)
        {
            <form asp-controller="Product" asp-action="Index" method="get">
                @foreach (var name in brochure.ProductNames)
                {
                    <input type="hidden" name="productNames" value="@name" />
                }
                <input type="image" src="@brochure.ImageURL" alt="Brochure Image" style="width:1296px; height:350px;" />
            </form>
            <a asp-controller="Home" asp-action="Manage" asp-route-id="@brochure.Id" class="btn btn-info">Manage</a>
        }
    </div>
}